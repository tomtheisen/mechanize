@import "prefixer.less";

@font-face {
  font-family: 'Aldrich';
  font-style: normal;
  font-weight: 400;
  src: local('Aldrich'), url(aldrich.woff) format('woff');
}

@background: #272D40;
@panel: #364659;
@accent: #55736D;
@highlight: #D0D3B8;
@green: #9DBF8E;  // ?
@space: #0D1216;

html {
	height: 100%;
	margin: 0;
}

body {
	font-family: 'Aldrich', sans-serif;
	background-color: @background;
	color: @highlight;
	height: 100%;
	margin: 0;
}

h1, h2, h3, h4 {
	margin: 0 0 1rem 0;
}

ul {
	padding: 0;
	list-style-type: none;
}

button {
	background-color: @accent;
	color: @highlight;
	border-width: 0px;
	.border-radius(16px);
	height: 32px;
	padding: 0 32px;
	line-height: 32px;
	font-family: 'Aldrich', sans-serif;
	font-size: 1rem;
	cursor: pointer;
}

#loadingMessage {
	padding: 3rem;
}

#gameSurface {
	width: 100%;
	height: 100%;
}

#game-controls {
	position: absolute;
	margin: 16px;
	right: 0;
}

#notifications {
	position: absolute;
	margin: 16px;
	right: 0;
	bottom: 0;
	
	.notification {
		margin: 16px;
		.border-radius(16px);
		.box-sizing(border-box);
		padding: 8px;
		background-color: @panel;
		max-width: 30rem;
		max-height: 30rem;
		white-space: nowrap;
		overflow: hidden;
		cursor: pointer;
	}
}

.progress {
	box-sizing: border-box;
	height: 32px;
	.border-radius(0 16px 16px 0);
	padding: 8px 8px 8px 0;
	overflow: hidden;
	margin: 1rem 0;
	background-color: @accent;

	.value {
		.border-radius(0 8px 8px 0);
		height: 16px;
		text-indent: 1em;
		font-size: 0.8rem;
		background-color: @highlight;
		color: @panel;
		overflow: hidden;
		position: relative;
		white-space: nowrap;
	}
}

.panel {
	.border-radius(16px);
	background-color: @panel;
	padding: 16px;
	margin: 16px;
	display: inline-block;
	vertical-align: top;
}

.resource-container {
	overflow: auto;
	margin-top: 16px;
	padding: 8px;
	background-color: @space;
	border: solid @accent 8px;
	.border-radius(8px);
	margin: 8px 0;
}

.wrap-every(@n) {
  	&:nth-child(@{n}n+1) {
        clear: left;
    }
}

.resource {
	float: left;
	width: 32px;
	height: 32px;
	margin: 1px;
	.box-sizing(border-box);
	position: relative;

	.wrap-every(8);
	
	background-color: red;  /* for debugging, should never see */
	&.none { background-color: black; }

	.collect-delay(@delay) {
		&:hover {
			.collect-progress 	{ .transition-duration(@delay); }
			.collector 			{ .transition-delay(@delay); }
		}
	}

	.resource(@tile-index; @collection-delay) {
		background-image: url(img/resource-tiles.png);
		background-position-x: (-32px * @tile-index);
		.collect-delay(@collection-delay);
	}

	&.rock { .resource(0; 2s); }
	&.iron { .resource(1; 5s); }

	.collect-progress {
		width: 0%;
		height: 10%;
		position: absolute;
		background-color: @green;
	}

	.collector {
		width: 100%;
		height: 100%;
		position: absolute;
		visibility: hidden;

		background-color: white;
		.opacity(0.2);
	}

	&:hover {
		.collect-progress {
			.transition-timing-function(linear);
			width: 100%;
		}

		.collector {
			visibility: visible;
			cursor: pointer;
		}
	}
}

.active {
	border: solid #ccc 1px;
	.animation-name(active-pulse);
	.animation-duration(0.5s);
	.animation-iteration-count(infinite);
	.animation-direction(alternate);
}

// come on LESS, get your shit together
@-o-keyframes active-pulse { from {border-color: #333;} to {border-color: #ddd;}}
@-moz-keyframes active-pulse { from {border-color: #333;} to {border-color: #ddd;}}
@-webkit-keyframes active-pulse { from {border-color: #333;} to {border-color: #ddd;}}
@keyframes active-pulse { from {border-color: #333;} to {border-color: #ddd;}}

.inventory {
	.resource { cursor: pointer; }
	.resource.none { cursor: default; }
}

#devices {
	& > ul {
		& > li {
			margin-bottom: 1rem;
			.border-radius(8px);
			/*background: @space;*/
			margin: 8px 0;

			& > h3 {
				cursor: pointer;
				margin: 0;
				font-size: 1rem;
				font-weight: normal;
				.border-radius(8px);

				.transition(background-color 500ms ease-out);

				&.hidden::before {content: "\25bc"; }
				&.shown::before {content: "\25b6"; } 
			}
			&.error > h3 {
				background-color: (@panel + #400);
			}

			& > .controls {
				margin-left: 18px;

				& > :first-child {
					margin-top: 8px;
				}
			}
		}
	}
}